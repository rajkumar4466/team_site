---
phase: 05-data-accuracy-and-real-assets
plan: 04
type: execute
wave: 3
depends_on:
  - 05-02
  - 05-03
files_modified:
  - src/data/stats.ts
autonomous: false
requirements:
  - DATA-01
  - DATA-02
  - PHOTO-01
  - PHOTO-02

must_haves:
  truths:
    - "Season 2021 in stats.ts shows position: 2 (runners-up), not position: 6"
    - "Season 2025 exists in stats.ts with position: 8, title: false"
    - "Top performers run totals match human-verified values from Plan 02 review"
    - "User can visit /stats and see correct KKR season history including 2021 runners-up and 2025"
    - "User can visit /players and /gallery and see real player photographs (not generic Phase 2 placeholders)"
    - "npm run build exits 0 with no TypeScript errors"
  artifacts:
    - path: "src/data/stats.ts"
      provides: "Corrected KKR season records (2008-2025) and top performers with accurate stats"
      exports: ["seasonRecords", "topPerformers"]
      contains: "year: 2025"
  key_links:
    - from: "src/data/stats.ts seasonRecords"
      to: "/stats page season table"
      via: "server component static import"
      pattern: "seasonRecords"
    - from: "src/data/stats.ts topPerformers"
      to: "/stats page top performers section"
      via: "server component static import"
      pattern: "topPerformers"
---

<objective>
Apply the human-verified stat corrections from Plan 02 to stats.ts, then run a final build and human verification of all updated pages (/stats, /players, /gallery). This is the closing plan for Phase 5 — it converts the verified data into the live site.

Purpose: DATA-01 and DATA-02 require applying the scraping corrections. This plan makes the corrections and confirms all four requirements (DATA-01, DATA-02, PHOTO-01, PHOTO-02) are visually satisfied.
Output: Updated src/data/stats.ts. All four requirements satisfied and human-confirmed.
</objective>

<execution_context>
@/Users/mithra_sundaram/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mithra_sundaram/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-data-accuracy-and-real-assets/05-02-SUMMARY.md
@.planning/phases/05-data-accuracy-and-real-assets/05-03-SUMMARY.md
@src/data/stats.ts

<interfaces>
<!-- Current stats.ts — full content shown for reference. Corrections target only specific values. -->
```typescript
import { SeasonRecord, TopPerformer } from "../types/stats";

export const seasonRecords: SeasonRecord[] = [
  { year: 2008, wins: 6,  losses: 8, noResult: 0, position: 8, title: false },
  // ... (2009-2020 unchanged unless scrape revealed errors) ...
  { year: 2021, wins: 7,  losses: 7, noResult: 0, position: 6, title: false },  // WRONG: position should be 2
  // ... (2022-2024 as-is) ...
  // MISSING: 2025 season entry needs to be ADDED
];

export const topPerformers: TopPerformer[] = [
  { name: "Sunil Narine",   category: "runs",    total: 3500, seasons: 13 },  // WRONG: ~1507 actual
  { name: "Robin Uthappa",  category: "runs",    total: 3145, seasons: 8  },  // WRONG: ~2649 actual
  { name: "Gautam Gambhir", category: "runs",    total: 2982, seasons: 7  },  // Possibly wrong: ~3035-3345
  // ... (Rinku Singh, Brendon McCullum likely need verification)
  { name: "Sunil Narine",   category: "wickets", total: 178,  seasons: 13 },  // May need update
  // ... (Umesh, Russell, Kuldeep, Varun — verify from scrape)
];
```

CRITICAL: The exact corrections to apply come from the 05-02-SUMMARY.md. Read that file FIRST before editing stats.ts. Apply the corrections the human approved in Plan 02's checkpoint, not the estimates above.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply verified corrections to src/data/stats.ts</name>
  <files>src/data/stats.ts</files>
  <action>
Read `src/data/stats.ts` and `.planning/phases/05-data-accuracy-and-real-assets/05-02-SUMMARY.md` to get the exact corrections approved during the Plan 02 human review checkpoint.

Apply ALL corrections the human confirmed. At minimum, these MUST be applied regardless:

**Season Records corrections:**
1. Year 2021: Change `position: 6` to `position: 2` (KKR were runners-up — CSK won the final by 27 runs)
2. Year 2025: ADD a new SeasonRecord entry at the end of the seasonRecords array:
   `{ year: 2025, wins: 5, losses: 9, noResult: 0, position: 8, title: false }`
   (Exact values from human-verified Plan 02 checkpoint should override these estimates if different)

**Top Performers corrections (apply values from 05-02-SUMMARY.md):**
- Update Sunil Narine runs total from 3500 to the verified KKR-specific value
- Update Robin Uthappa runs total from 3145 to the verified value
- Update Gautam Gambhir runs total to the verified value
- Apply any bowler corrections (wicket totals) that were confirmed in Plan 02
- If Plan 02 revealed Rinku Singh or Brendon McCullum totals are wrong, correct those too

The array ORDER must be maintained: seasonRecords sorted by year ascending; topPerformers with runs first (sorted by total descending), then wickets (sorted by total descending).

After editing, validate the file compiles:
```bash
cd /Users/mithra_sundaram/Desktop/code/AI/projects/team_site && npx tsc --noEmit
```

If TypeScript shows an error, fix before proceeding. Common error: forgot to add comma after the last existing array entry before the 2025 entry.
  </action>
  <verify>
    <automated>cd /Users/mithra_sundaram/Desktop/code/AI/projects/team_site && node -e "const src = require('fs').readFileSync('src/data/stats.ts', 'utf8'); if (!src.includes('year: 2025')) throw new Error('2025 season missing'); if (!src.includes('position: 2') && src.includes('year: 2021')) throw new Error('2021 position not corrected to 2 — check the line'); console.log('Stats corrections verified');" && npx tsc --noEmit && echo "TypeScript OK"</automated>
  </verify>
  <done>stats.ts contains year: 2025 entry. Year 2021 shows position: 2. All values approved in Plan 02's checkpoint are applied. `npx tsc --noEmit` exits 0.</done>
</task>

<task type="auto">
  <name>Task 2: Run final build to confirm no TypeScript errors across all updated files</name>
  <files></files>
  <action>
Run `npm run build` from the project root. This validates all four updated data files (stats.ts, players.ts, gallery.ts) and the full Next.js build pipeline.

```bash
cd /Users/mithra_sundaram/Desktop/code/AI/projects/team_site && npm run build
```

If the build fails:
- Check the error message for TypeScript type mismatches
- Common issues: `imageUrl` field with wrong URL format (string is fine), missing comma in arrays, wrong type for `position` (must be number)
- Fix any TypeScript errors in the relevant data file, then re-run build

The build must exit 0 before proceeding to the human verify checkpoint.
  </action>
  <verify>
    <automated>cd /Users/mithra_sundaram/Desktop/code/AI/projects/team_site && npm run build 2>&1 | tail -10 && echo "BUILD_EXIT:$?"</automated>
  </verify>
  <done>`npm run build` exits 0. No TypeScript errors. All pages generated successfully in the build output.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Human verification of all Phase 5 changes on localhost</name>
  <action>Start the dev server and present the user with verification steps for all four Phase 5 requirements across /stats, /players, and /gallery pages.</action>
  <what-built>
    All four Phase 5 requirements implemented:
    - DATA-01: KKR season records (2008-2025) corrected in src/data/stats.ts — 2021 fixed to runners-up, 2025 added
    - DATA-02: Top performers corrected with human-verified run/wicket totals
    - PHOTO-01: Player profile and squad tile imageUrls updated to real Wikimedia Commons photos or improved placeholders
    - PHOTO-02: Gallery photo urls updated with real Wikimedia photos where available
  </what-built>
  <how-to-verify>
    Run `npm run dev` in the project root, then visit:

    1. **http://localhost:3000/stats** — Season Records table
       - Scroll to 2021 row: should show position 2 (runners-up), NOT position 6
       - Scroll to bottom: 2025 row should appear with position 8
       - Top Performers section: Sunil Narine run total should be ~1507, NOT 3500
       - Gautam Gambhir run total should reflect the corrected value

    2. **http://localhost:3000/players** — Squad grid
       - Player cards should show real player photos OR clearly-labeled placeholder tiles (not the generic "PlayerName" placehold.co from Phase 2)
       - Players with Wikimedia Commons photos should show actual headshots

    3. **http://localhost:3000/players/shreyas-iyer** (and 2-3 other player profiles)
       - Profile hero should show real photo or improved placeholder
       - Comment section still works (Phase 4 feature unaffected)

    4. **http://localhost:3000/gallery** — Gallery page
       - Photo cards show real Wikimedia images where found
       - Remaining placeholder images are descriptive (not generic)
       - No broken image icons (404s) in browser Network tab

    Stop the dev server when done. Type "approved" to mark Phase 5 complete.
  </how-to-verify>
  <resume-signal>Type "approved" if all four pages look correct, or describe any issues (e.g. "2021 still shows wrong position", "gallery images 404", "player photos broken")</resume-signal>
</task>

</tasks>

<verification>
1. stats.ts: `year: 2025` entry exists
2. stats.ts: 2021 entry has `position: 2`
3. stats.ts: Top performer totals match 05-02-SUMMARY.md verified values
4. players.ts and gallery.ts: no generic `text=PlayerName` placehold.co URLs remain
5. `npm run build` exits 0
6. Human verified /stats, /players, /gallery on localhost:3000
</verification>

<success_criteria>
User visits /stats and sees accurate KKR history (2021 as runners-up, 2025 in table). User visits /players and /gallery and sees real player photos or meaningfully improved placeholders. npm run build exits 0. All four requirements (DATA-01, DATA-02, PHOTO-01, PHOTO-02) are human-confirmed as satisfied.
</success_criteria>

<output>
After completion, create `.planning/phases/05-data-accuracy-and-real-assets/05-04-SUMMARY.md`

Update .planning/REQUIREMENTS.md to mark DATA-01, DATA-02, PHOTO-01, PHOTO-02 as [x] complete.
Update .planning/STATE.md: Phase 5 complete, all phases done.
</output>
