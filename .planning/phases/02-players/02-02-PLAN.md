---
phase: 02-players
plan: 02
type: execute
wave: 2
depends_on: [02-01]
files_modified:
  - src/app/players/[slug]/page.tsx
autonomous: false
requirements: [PLAY-02, PLAY-03]

must_haves:
  truths:
    - "User can navigate from a squad card to a full player profile page at /players/[slug]"
    - "Profile page shows player name, jersey number, role, nationality, and age"
    - "Profile page has a visible photo area (placeholder or real image)"
    - "Static export generates one HTML file per player (16 files in out/players/)"
    - "All profile pages are accessible without a server — pure static HTML"
  artifacts:
    - path: "src/app/players/[slug]/page.tsx"
      provides: "Dynamic player profile page with generateStaticParams"
      exports: ["default (page component)", "generateStaticParams"]
      contains: "generateStaticParams"
  key_links:
    - from: "src/app/players/[slug]/page.tsx"
      to: "src/data/players.ts"
      via: "getPlayerBySlug(slug) + generateStaticParams using players array"
      pattern: "getPlayerBySlug|generateStaticParams"
    - from: "src/app/players/[slug]/page.tsx"
      to: "src/types/player.ts"
      via: "Player type for props"
      pattern: "import.*Player"
---

<objective>
Build individual player profile pages with static generation.

Purpose: Complete the player browsing experience — users click a card from the squad grid and land on a detailed profile page showing full bio, jersey number, and photo area. Uses Next.js generateStaticParams to pre-render all 16 profiles at build time for static export.
Output: src/app/players/[slug]/page.tsx pre-rendering 16 static HTML player profiles.
</objective>

<execution_context>
@/Users/mithra_sundaram/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mithra_sundaram/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-players/02-01-SUMMARY.md

<interfaces>
<!-- Interfaces from Plan 01 that this plan consumes. -->

From src/types/player.ts (created in Plan 01):
```typescript
export interface Player {
  id: string;
  name: string;
  jerseyNumber: number;
  role: "Batsman" | "Bowler" | "All-rounder" | "Wicket-keeper";
  nationality: string;
  age: number;
  imageUrl: string;
  bio: string;
}
```

From src/data/players.ts (created in Plan 01):
```typescript
export const players: Player[];
export function getPlayerBySlug(slug: string): Player | undefined;
```

Layout patterns (from Phase 1):
- All pages: `max-w-7xl mx-auto px-4 sm:px-6 lg:px-8` container
- KKR colors: bg-kkr-purple, text-kkr-gold, bg-kkr-purple-dark, text-kkr-purple
- next.config.ts: `images: { unoptimized: true }` and `output: 'export'`
- Use `<img>` tag (not next/image) — simpler for static export with unoptimized images
- Static export requires `generateStaticParams` for ALL dynamic routes — without it, build fails
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Player profile page with static params generation</name>
  <files>src/app/players/[slug]/page.tsx</files>
  <action>
Create `src/app/players/[slug]/page.tsx`. This is a Next.js App Router dynamic route for static export.

CRITICAL: `generateStaticParams` is REQUIRED. Without it, `npm run build` fails for static export mode. It must be a named export that returns all player slugs.

Structure:

```tsx
import { players, getPlayerBySlug } from '@/data/players';
import { notFound } from 'next/navigation';

// Required for static export — generates one HTML file per player at build time
export function generateStaticParams() {
  return players.map((player) => ({ slug: player.id }));
}

// Page component receives { params: { slug: string } }
export default async function PlayerPage({ params }: { params: Promise<{ slug: string }> }) {
  const { slug } = await params;
  const player = getPlayerBySlug(slug);
  if (!player) notFound();
  // ... render profile
}
```

Note: In Next.js 15 App Router, `params` is a Promise — must be awaited. Use `async function` and `await params`.

Profile page layout (all within max-w-7xl mx-auto px-4 sm:px-6 lg:px-8):

1. Back link: `← Back to Squad` linking to `/players`, styled text-kkr-purple hover:text-kkr-purple-light

2. Hero section (two-column on desktop, stacked on mobile — `grid grid-cols-1 md:grid-cols-2 gap-8`):
   LEFT column — Photo area:
   - Render `<img src={player.imageUrl} alt={player.name} className="w-full aspect-square object-cover rounded-2xl bg-kkr-purple-light" />`
   - The image file won't exist on disk yet — that is fine, bg-kkr-purple-light acts as a color placeholder
   - Overlay the jersey number as a large badge: absolute positioned div in corner showing `#${player.jerseyNumber}` in text-kkr-gold font-black text-4xl on a bg-kkr-purple-dark background, rounded-lg, padding px-3 py-1

   RIGHT column — Bio details:
   - Player name: `text-4xl font-extrabold text-kkr-purple`
   - Role: pill badge `bg-kkr-purple text-kkr-gold text-sm font-semibold px-3 py-1 rounded-full inline-block`
   - Bio paragraph: `text-gray-600 text-base leading-relaxed`
   - Stats grid (2-column): show Nationality, Age, Jersey Number as labeled stat blocks
     - Label: `text-xs text-gray-400 uppercase tracking-wider`
     - Value: `text-xl font-bold text-kkr-purple`

3. Page metadata. Add a generateMetadata export:
```tsx
export async function generateMetadata({ params }: { params: Promise<{ slug: string }> }) {
  const { slug } = await params;
  const player = getPlayerBySlug(slug);
  return { title: player ? `${player.name} | KKR Squad` : 'Player Not Found' };
}
```

No `use client` — this is a pure server component. All data comes from the static players array.
  </action>
  <verify>
    <automated>cd /Users/mithra_sundaram/Desktop/code/AI/projects/team_site && npx tsc --noEmit 2>&1 | tail -5 && npm run build 2>&1 | tail -15</automated>
  </verify>
  <done>Build passes with zero TypeScript errors. out/players/ directory contains subdirectories for all 16 player slugs (e.g. out/players/shreyas-iyer/index.html). Each profile page renders name, jersey number, role, nationality, age, and bio fields.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify squad grid and player profiles</name>
  <action>
Human visual verification of the complete Phase 2 player experience. Run the dev server and check both pages.

Start dev server: `npm run dev` in the project directory, then open http://localhost:3000 in a browser.
  </action>
  <verify>
    1. Navigate to http://localhost:3000/players
       - Confirm: A responsive grid of player cards is visible (not the old "coming soon" placeholder)
       - Confirm: Each card shows a jersey number badge in gold, player name, role, and nationality
       - Confirm: Cards are styled with kkr-purple accents
       - Confirm: Grid collapses to fewer columns on narrow viewport (responsive)

    2. Click any player card (e.g., Shreyas Iyer)
       - Confirm: You land on /players/shreyas-iyer (or the appropriate slug)
       - Confirm: Page shows player name as a large heading
       - Confirm: Jersey number is displayed prominently
       - Confirm: Role badge is visible (kkr-purple background, gold text)
       - Confirm: Nationality, age, and bio are displayed
       - Confirm: "Back to Squad" link returns you to /players

    3. Run `npm run build` in the terminal
       - Confirm: Build exits 0 with no errors
       - Confirm: Terminal shows 16+ static routes under /players/[slug]
  </verify>
  <done>Human approves visual quality: squad grid renders all players, profile pages show complete bio data, navigation works in both directions, build is clean.</done>
  <resume-signal>Type "approved" if all checks pass, or describe any visual/functional issues</resume-signal>
</task>

</tasks>

<verification>
After Task 1 completes and before checkpoint:
1. `npx tsc --noEmit` exits 0
2. `npm run build` exits 0 — critical check for generateStaticParams
3. `ls out/players/` shows 16+ subdirectories (one per player slug)
4. `grep -l "Shreyas" out/players/shreyas-iyer/index.html` returns the file
5. Each profile HTML contains jersey number, nationality, and role text
</verification>

<success_criteria>
- User can click any PlayerCard on /players and reach that player's profile page
- Profile page shows: player name (h1), jersey number (prominent badge), role (styled pill), nationality, age, and bio
- generateStaticParams exports all 16 slugs — build produces out/players/{slug}/index.html for every player
- Zero TypeScript compilation errors
- Human verifier approves visual quality and navigation flow (PLAY-02, PLAY-03 complete)
</success_criteria>

<output>
After completion, create `.planning/phases/02-players/02-02-SUMMARY.md`
</output>
